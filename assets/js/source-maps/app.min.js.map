{"version":3,"sources":["api.js","main.js"],"names":["requestData","page","cb","startLoading","requestUrl","console","log","setTimeout","stopLoading","app","loading","txt","show","showErr","errMsg","document","querySelector","MaterialSnackbar","showSnackbar","message","timeout","initPage","window","location","hash","appInit","showedDetail","nowActiveSection","replace","numberToPercentage","number","option","parseFloat","Math","abs","toFixed","Vue","el","mounted","this","filters","numberWithCommas","toString","durationToString","millisecond","dateToString","date","mode","methods","navClickListener","event","localApp","destination","path","getAttribute","$","click","data","aRecordClickListener","from","index","list","id","closeDetail","computed","detailIsOpen","shopDetail","userDetail","containerDetail","deliveryDetail","loginUser","summary","userAmount","storeAmount","activityAmount","activityHistorySummary","usedAmount","lostAmount","totalDuration","shopHistorySummary","quantityOfBorrowingFromDiffPlace","shopRecentHistorySummary","search","shop","storeName","toUsedAmount","todayAmount","weekAmount","weekAverage","expand","recentAmount","joinedDate","contactNickname","contactPhone","recentAmountPercentage","history","time","serial","action","owner","by","activity","user","totalUserAmount","totalUsageAmount","weeklyAverageUsage","totalLostAmount","phone","usingAmount","userPhone","joinedMethod","averageUsingDuration","percentageOfBorrowingFromDiffPlace","containerType","containerID","rentTime","rentPlace","returnTime","returnPlace","usingDuration","container","type","totalAmount","returnedAmount","toCleanAmount","toDeliveryAmount","toSignAmount","inStorageAmount","code","reuseTime","status","bindedUser","tradeTime","newUser","oriUser","comment","delivery","on","css"],"mappings":"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","file":"../app.min.js","sourcesContent":["function requestData(page, cb) {\r\n    startLoading();\r\n    var requestUrl = \"/manager/data/\" + page;\r\n    // $.ajax(requestUrl, {\r\n    //         dataType: \"json\"\r\n    //     })\r\n    //     .done(function(data, textStatus, jqXHR) {\r\n    //         stopLoading();\r\n    //         cb(data);\r\n    //     })\r\n    //     .fail(function(jqXHR, textStatus, errorThrown) {\r\n    //         stopLoading();\r\n    //         showErr(jqXHR.statusText);\r\n    //     })\r\n    //     .always(function() {});\r\n    console.log(requestUrl);\r\n    setTimeout(function() {\r\n        stopLoading();\r\n        cb();\r\n    })\r\n}\r\n\r\nfunction startLoading() {\r\n    app.loading.txt = \"Loading...\";\r\n    app.loading.show = true;\r\n}\r\n\r\nfunction stopLoading() {\r\n    app.loading.show = false;\r\n    app.loading.txt = \"\";\r\n}\r\n\r\nfunction showErr(errMsg) {\r\n    document.querySelector('#toast').MaterialSnackbar.showSnackbar({\r\n        message: errMsg,\r\n        timeout: 4000\r\n    });\r\n}","function initPage() {\r\n    return window.location.hash || \"#index\";\r\n};\r\n\r\n$(window).on('load', function() {\r\n    $('#loading_main').css('display', 'none');\r\n    appInit(window);\r\n});\r\n\r\nfunction appInit(window) {\r\n    var showedDetail = null;\r\n    var nowActiveSection = initPage().replace(\"#\", \"\");\r\n    var arrowUpward = '<i class=\"material-icons\" role=\"presentation\">arrow_upward</i>';\r\n    var arrowDownward = '<i class=\"material-icons\" role=\"presentation\">arrow_downward</i>';\r\n    var arrowDropDown = '<i class=\"material-icons\" role=\"presentation\">arrow_drop_down</i>';\r\n    var numberToPercentage = function(number, option) {\r\n        switch (option) {\r\n            case 'withArrow':\r\n                var arrow = number > 0 ? arrowUpward : arrowDownward;\r\n                return \"(\" + arrow + parseFloat(Math.abs(number) * 100).toFixed(1) + \"%)\";\r\n                break;\r\n            case 'withoutParentheses':\r\n                return parseFloat(number * 100).toFixed(1) + \"%\";\r\n                break;\r\n            default:\r\n                return \"(\" + parseFloat(number * 100).toFixed(1) + \"%)\";\r\n                break;\r\n        }\r\n    };\r\n    var app = new Vue({\r\n        el: \"#app\",\r\n        mounted: function() {\r\n            this[nowActiveSection].show = true;\r\n        },\r\n        filters: {\r\n            numberWithCommas: function(number) {\r\n                return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            },\r\n            numberToPercentage: numberToPercentage,\r\n            durationToString: function(millisecond) {\r\n                return millisecond;\r\n            },\r\n            dateToString: function(date, mode) {\r\n                switch (mode) {\r\n                    case \"only_date\":\r\n                        return date;\r\n                        break;\r\n                    default:\r\n                        return date;\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            navClickListener: function(event) {\r\n                var localApp = this;\r\n                var destination = event.path[1].getAttribute('href').replace(\"#\", \"\");\r\n                if ((nowActiveSection + \"Detail\") in this) this[nowActiveSection + \"Detail\"].show = false;\r\n                $('.mdl-layout__obfuscator.is-visible').click();\r\n                requestData(destination, function(data) {\r\n                    localApp[nowActiveSection].show = false;\r\n                    localApp[destination].show = true;\r\n                    // localApp[destination].data = data;\r\n                    nowActiveSection = destination;\r\n                });\r\n            },\r\n            aRecordClickListener: function(from, index) {\r\n                var localApp = this;\r\n                showedDetail = from + \"Detail\";\r\n                var toRequest = showedDetail + \"/\" + this[from].data.list[index].id;\r\n                requestData(toRequest, function(data) {\r\n                    localApp[showedDetail].show = true;\r\n                    // localApp[showedDetail].data = data;\r\n                });\r\n            },\r\n            closeDetail: function() {\r\n                this[showedDetail || (nowActiveSection + \"Detail\")].show = false;\r\n            },\r\n            numberToPercentage: numberToPercentage\r\n        },\r\n        computed: {\r\n            detailIsOpen: function() {\r\n                return this.shopDetail.show || this.userDetail.show || this.containerDetail.show || this.deliveryDetail.show;\r\n            }\r\n        },\r\n        data: {\r\n            loginUser: \"0936-000-111\",\r\n            loading: {\r\n                show: false,\r\n                txt: \"載入中...\"\r\n            },\r\n            index: {\r\n                show: false,\r\n                data: {\r\n                    summary: {\r\n                        userAmount: 824,\r\n                        storeAmount: 18,\r\n                        activityAmount: 62\r\n                    },\r\n                    activityHistorySummary: {\r\n                        usedAmount: 16774,\r\n                        lostAmount: 135,\r\n                        totalDuration: 12314\r\n                    },\r\n                    shopHistorySummary: {\r\n                        usedAmount: 6487,\r\n                        lostAmount: 248,\r\n                        totalDuration: 12314,\r\n                        quantityOfBorrowingFromDiffPlace: 796\r\n                    },\r\n                    shopRecentHistorySummary: {\r\n                        usedAmount: 87,\r\n                        lostAmount: 3,\r\n                        totalDuration: 12314,\r\n                        quantityOfBorrowingFromDiffPlace: 23\r\n                    }\r\n                }\r\n            },\r\n            search: {\r\n                show: false,\r\n\r\n            },\r\n            shop: {\r\n                show: false,\r\n                data: {\r\n                    list: [{\r\n                        id: 0,\r\n                        storeName: \"布萊恩紅茶\",\r\n                        toUsedAmount: 24,\r\n                        todayAmount: 2,\r\n                        weekAmount: 18,\r\n                        weekAverage: 10\r\n                    }]\r\n                }\r\n            },\r\n            shopDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    storeName: \"布萊恩紅茶\",\r\n                    toUsedAmount: 24,\r\n                    todayAmount: 2,\r\n                    weekAmount: 18,\r\n                    recentAmount: 18,\r\n                    joinedDate: 1234,\r\n                    contactNickname: \"店長\",\r\n                    contactPhone: \"0988555666\",\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    history: [{\r\n                        time: 1234,\r\n                        serial: \"#161\",\r\n                        action: \"借出\",\r\n                        owner: \"0911-***-521\",\r\n                        by: \"布萊恩紅茶(阿呆店長)\"\r\n                    }]\r\n                }\r\n            },\r\n            activity: {\r\n                show: false,\r\n\r\n            },\r\n            user: {\r\n                show: false,\r\n                data: {\r\n                    totalUserAmount: 2500,\r\n                    totalUsageAmount: 2500,\r\n                    weeklyAverageUsage: 2500,\r\n                    totalLostAmount: 12,\r\n                    list: [{\r\n                        id: 0,\r\n                        phone: \"0912345678\",\r\n                        usingAmount: 25,\r\n                        lostAmount: 1,\r\n                        totalUsageAmount: 30\r\n                    }]\r\n                }\r\n            },\r\n            userDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    userPhone: \"0936-003-091\",\r\n                    usingAmount: 3,\r\n                    lostAmount: 23,\r\n                    totalUsageAmount: 200,\r\n                    joinedDate: 1234,\r\n                    joinedMethod: \"店鋪 (方糖咖啡)\",\r\n                    recentAmount: 18,\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    averageUsingDuration: 20 * 1000,\r\n                    percentageOfBorrowingFromDiffPlace: 0.43,\r\n                    history: [{\r\n                        containerType: \"12oz 玻璃杯\",\r\n                        containerID: \"#101\",\r\n                        rentTime: 1234,\r\n                        rentPlace: \"布萊恩紅茶\",\r\n                        returnTime: 1234,\r\n                        returnPlace: \"布萊恩紅茶\",\r\n                        usingDuration: 1234\r\n                    }]\r\n                }\r\n            },\r\n            container: {\r\n                show: false,\r\n                data: {\r\n                    list: [{\r\n                            id: 0,\r\n                            type: \"16oz 玻璃杯\",\r\n                            totalAmount: 286,\r\n                            toUsedAmount: 106,\r\n                            usingAmount: 20,\r\n                            returnedAmount: 19,\r\n                            toCleanAmount: 41,\r\n                            toDeliveryAmount: 24,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 15,\r\n                            lostAmount: 161\r\n                        },\r\n                        {\r\n                            id: 1,\r\n                            type: \"12oz 玻璃杯\",\r\n                            totalAmount: 393,\r\n                            toUsedAmount: 50,\r\n                            usingAmount: 23,\r\n                            returnedAmount: 17,\r\n                            toCleanAmount: 22,\r\n                            toDeliveryAmount: 0,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 111,\r\n                            lostAmount: 170\r\n                        },\r\n                        {\r\n                            id: 2,\r\n                            type: \"16oz 把手杯\",\r\n                            totalAmount: 56,\r\n                            toUsedAmount: 1,\r\n                            usingAmount: 0,\r\n                            returnedAmount: 0,\r\n                            toCleanAmount: 2,\r\n                            toDeliveryAmount: 0,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 49,\r\n                            lostAmount: 4\r\n                        }\r\n                    ]\r\n                }\r\n            },\r\n            containerDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    containerID: \"#257\",\r\n                    containerType: {\r\n                        txt: \"16oz 玻璃杯\",\r\n                        code: 1\r\n                    },\r\n                    reuseTime: 24,\r\n                    status: \"使用中\",\r\n                    bindedUser: \"0921-**-931\",\r\n                    joinedDate: 1234,\r\n                    history: [{\r\n                        tradeTime: 1234,\r\n                        action: \"借出\",\r\n                        newUser: \"0921-***-931\",\r\n                        oriUser: \"特有種商行(小衛)\",\r\n                        comment: \"\"\r\n                    }]\r\n                }\r\n            },\r\n            delivery: {\r\n                show: false,\r\n\r\n            },\r\n            deliveryDetail: {\r\n                show: false,\r\n                expand: false,\r\n\r\n            }\r\n        }\r\n    });\r\n    window.app = app;\r\n}"]}