{"version":3,"sources":["main.js","api.js"],"names":["debounce","func","delay","timer","context","this","args","arguments","clearTimeout","setTimeout","apply","appInit","window","sortType","tmpDynamicLoadingBaseIndex","placeholderTxtDict","shop","user","container","icon","numberToPercentage","number","option","isNaN","parseFloat","Math","abs","toFixed","getListRenderingRawCapacity","realActiveSection","table","$","find","get","rawHeight","table_box","getBoundingClientRect","rawCapacity","floor","innerHeight","top","scrollTop","getListRenderingDataLength","Detail","showed","app","shopDetail","data","history","length","userDetail","containerDetail","Section","active","list","delivery","dataFilter","aData","searchRegExp","id","match","storeName","dataSorter","key","string","dataA","dataB","listRendering","keyToSort","toLowerCase","sortDir","numberString","parseInt","error","serial","slice","time","Date","bindKeyUpEvent","detailIsOpen","detailId","indexOf","tablePageSwitcher","focus","off","keyup","event","flipPage","cleanSearchBar","val","parent","removeClass","search","txt","listRenderingParamInit","dataToInit","baseIndex","Object","assign","open","destination","daemon","close","show","placeholder","test","requestData","$nextTick","componentHandler","upgradeDom","showedSection","showedDetail","aCategory","Dialog","ele","nowClass","nowActiveClass","classDict","stepOne","stepTwo","edit","changeClass","to","Error","addClass","showModal","DeliveryDetail","eleHtml","showedElement","showedDelivery","dataIndex","init","html","remove","rawIndex","theDelivery","after","Vue","component","template","el","mounted","localApp","resize","dataLength","updated","filters","numberWithCommas","toString","replace","durationToString","millisecond","duration","moment","result","addString","num","ctr","dateToString","date","mode","thisMoment","isValid","format","methods","navClickListener","click","aRecordClickListener","from","detailToShow","aRefreshButtonClickListener","type","showToast","method","closeDetail","searchData","toRequest","aSearchResultClickListener","category","sortList","by","showKeySorting","maxIndex","ceil","min","max","listMatchCtx","openDialog","flipDialogPage","closeDialog","openDeliveryDetail","computed","txtArr","split","filter","forEach","index","arr","join","regExpTxt","RegExp","shopList","oriList","sort","listRendering_cpt","startIndex","endIndex","shopDetailHistory","userList","userDetailHistory","lastIndex","map","returnTime","lastIndexOf","concat","containerList","containerDetailHistory","deliveryList","loading","summary","userAmount","storeAmount","activityAmount","activityHistorySummary","usedAmount","lostAmount","totalDuration","shopRecentHistorySummary","customerLostAmount","quantityOfBorrowingFromDiffPlace","shopHistorySummary","shopLostAmount","name","expand","toUsedAmount","todayAmount","weekAmount","recentAmount","joinedDate","contactNickname","contactPhone","recentAmountPercentage","weekAverage","activity","totalUserAmount","totalUsageAmount","weeklyAverageUsage","totalLostAmount","userPhone","usingAmount","joinedMethod","averageUsingDuration","amountOfBorrowingFromDiffPlace","containerID","containerType","code","reuseTime","status","bindedUser","boxAmount","deliveryDate","toBox","toDelivery","toSign","signed","warning","boxList","boxName","contentList","contentName","contentCode","amount","console","location","hash","pendingReq","startLoading","stopLoading","msg","document","querySelector","MaterialSnackbar","showSnackbar","message","timeout","page","cb","abort","requestUrl","ajax","headers","Accept","dataType","done","textStatus","jqXHR","fail","errorThrown","responseJSON","href","statusText","always","on","pathname","css","dialog","dialogPolyfill","registerDialog","datedisplay","dateInput","datePicker","startDate","setDate","getDate","datepicker","language","minDate","dateFormat","autoClose","inline","onSelect","formattedDate","inst","hide"],"mappings":"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","file":"../app.min.js","sourcesContent":["$(window).on('load', function () {\r\n    if (window.location.pathname !== \"/manager/login\") {\r\n        $('#loading_main').css('display', 'none');\r\n        appInit(window);\r\n\r\n        var dialog = document.querySelector('dialog');\r\n        if (!dialog.showModal) {\r\n            dialogPolyfill.registerDialog(dialog);\r\n        }\r\n        $('.close').click(function () {\r\n            dialog.close();\r\n        });\r\n        window.dialog = dialog;\r\n\r\n        var datedisplay = $(\"#delivery_time_display\");\r\n        var dateInput = $(\"#delivery_time_date\");\r\n        var datePicker = null;\r\n        datedisplay.focus(function () {\r\n            if (datePicker) {\r\n                datePicker.show();\r\n            } else {\r\n                var startDate = new Date();\r\n                startDate.setDate(startDate.getDate() + 3);\r\n                datePicker = $(\"#datepicker\");\r\n                datePicker.datepicker({\r\n                    language: \"zh\",\r\n                    startDate: startDate,\r\n                    minDate: new Date(),\r\n                    dateFormat: \"mm / dd ( D )\",\r\n                    autoClose: true,\r\n                    inline: false,\r\n                    onSelect: function (formattedDate, date, inst) {\r\n                        datedisplay.val(formattedDate);\r\n                        dateInput.val(date);\r\n                        datePicker.hide();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nfunction debounce(func, delay) {\r\n    var timer = null;\r\n    return function () {\r\n        var context = this;\r\n        var args = arguments;\r\n        clearTimeout(timer);\r\n        timer = setTimeout(function () {\r\n            func.apply(context, args)\r\n        }, delay);\r\n    }\r\n}\r\n\r\nfunction appInit(window) {\r\n    var sortType = null;\r\n    var tmpDynamicLoadingBaseIndex = null;\r\n    var placeholderTxtDict = {\r\n        shop: \"店鋪\",\r\n        user: \"使用者\",\r\n        container: \"容器\"\r\n    };\r\n    var icon = {\r\n        arrowUpward: '<i class=\"material-icons\" role=\"presentation\">arrow_upward</i>',\r\n        arrowDownward: '<i class=\"material-icons\" role=\"presentation\">arrow_downward</i>',\r\n        arrowDropDown: '<i class=\"material-icons\" role=\"presentation\">arrow_drop_down</i>',\r\n        arrowDropUp: '<i class=\"material-icons\" role=\"presentation\">arrow_drop_up</i>'\r\n    };\r\n    var numberToPercentage = function (number, option) {\r\n        if (isNaN(number)) number = 0;\r\n        switch (option) {\r\n            case 'withArrow':\r\n                var arrow = number >= 0 ? icon.arrowUpward : icon.arrowDownward;\r\n                return \"(\" + arrow + parseFloat(Math.abs(number) * 100).toFixed(1) + \"%)\";\r\n            case 'withoutParentheses':\r\n                return parseFloat(number * 100).toFixed(1) + \"%\";\r\n            default:\r\n                return \"(\" + parseFloat(number * 100).toFixed(1) + \"%)\";\r\n        }\r\n    };\r\n    var getListRenderingRawCapacity = function (realActiveSection) {\r\n        var table = $(\"#\" + realActiveSection).find('tbody').get(0);\r\n        if (!table) return;\r\n        var table_box = table.getBoundingClientRect();\r\n        var rawHeight;\r\n        switch (realActiveSection) {\r\n            case \"user-detail\":\r\n                rawHeight = 65;\r\n                break;\r\n            case \"delivery\":\r\n                rawHeight = 56;\r\n                break;\r\n            default:\r\n                rawHeight = 48;\r\n                break;\r\n        }\r\n        var rawCapacity = Math.floor((window.innerHeight - table_box.top - 44 - $(\"main\").scrollTop()) / rawHeight);\r\n        return rawCapacity > 5 ? rawCapacity : 5;\r\n    };\r\n    var getListRenderingDataLength = function () {\r\n        if (Detail.showed !== null) {\r\n            if (Detail.showed === \"shopDetail\") return app.shopDetail.data.history.length;\r\n            else if (Detail.showed === \"userDetail\") return app.userDetail.data.history.length;\r\n            else if (Detail.showed === \"containerDetail\") return app.containerDetail.data.history.length;\r\n        } else {\r\n            if (Section.active === \"shop\") return app.shop.data.list.length;\r\n            else if (Section.active === \"user\") return app.user.data.list.length;\r\n            else if (Section.active === \"container\") return app.container.data.list.length;\r\n            else if (Section.active === \"delivery\") return app.delivery.data.list.length;\r\n        }\r\n        return -1;\r\n    }\r\n    var dataFilter = function (aData) {\r\n        if (app.searchRegExp) {\r\n            if (Section.active === \"user\") {\r\n                if (!aData.id) return false;\r\n                return aData.id.match(app.searchRegExp);\r\n            } else if (Section.active === \"shop\") {\r\n                if (!aData.storeName) return false;\r\n                return aData.storeName.match(app.searchRegExp);\r\n            }\r\n        } else {\r\n            return aData;\r\n        }\r\n    };\r\n    var dataSorter = {\r\n        get: function (key) {\r\n            if (this[key]) return this[key];\r\n            else return this.number;\r\n        },\r\n        string: function (dataA, dataB) {\r\n            dataA = dataA[app.listRendering.keyToSort].toLowerCase();\r\n            dataB = dataB[app.listRendering.keyToSort].toLowerCase();\r\n            if (app.listRendering.sortDir) {\r\n                if (dataA < dataB) return 1;\r\n                if (dataA > dataB) return -1;\r\n            } else {\r\n                if (dataA < dataB) return -1;\r\n                if (dataA > dataB) return 1;\r\n            }\r\n            return 0;\r\n        },\r\n        number: function (dataA, dataB) {\r\n            if (app.listRendering.sortDir) return dataB[app.listRendering.keyToSort] - dataA[app.listRendering.keyToSort];\r\n            else return dataA[app.listRendering.keyToSort] - dataB[app.listRendering.keyToSort];\r\n        },\r\n        numberString: function (dataA, dataB) {\r\n            try {\r\n                dataA = parseInt(dataA[app.listRendering.keyToSort]);\r\n                dataB = parseInt(dataB[app.listRendering.keyToSort]);\r\n                if (app.listRendering.sortDir) return dataB - dataA;\r\n                else return dataA - dataB;\r\n            } catch (error) {\r\n                return 1;\r\n            }\r\n        },\r\n        serial: function (dataA, dataB) {\r\n            dataA = parseInt(dataA[app.listRendering.keyToSort].slice(1));\r\n            dataB = parseInt(dataB[app.listRendering.keyToSort].slice(1));\r\n            if (app.listRendering.sortDir) return dataB - dataA;\r\n            else return dataA - dataB;\r\n        },\r\n        time: function (dataA, dataB) {\r\n            dataA = new Date(dataA[app.listRendering.keyToSort]);\r\n            dataB = new Date(dataB[app.listRendering.keyToSort]);\r\n            if (app.listRendering.sortDir) return dataB - dataA;\r\n            else return dataA - dataB;\r\n        }\r\n    };\r\n    var bindKeyUpEvent = function () {\r\n        if (!app.detailIsOpen) var tablePageSwitcher = $('.table-page-switcher');\r\n        else {\r\n            var detailId = Detail.showed.slice(0, Detail.showed.indexOf(\"Detail\")) + \"-detail\";\r\n            var tablePageSwitcher = $('#' + detailId + ' .table-page-switcher');\r\n        }\r\n        if (tablePageSwitcher.length) {\r\n            tablePageSwitcher.focus();\r\n            tablePageSwitcher.off(\"keyup\");\r\n            tablePageSwitcher.keyup(function (event) {\r\n                if (event.key === \"ArrowLeft\") {\r\n                    app.flipPage(\"last\");\r\n                } else if (event.key === \"ArrowRight\") {\r\n                    app.flipPage(\"next\");\r\n                }\r\n            });\r\n        }\r\n    };\r\n    var cleanSearchBar = function () {\r\n        $('.searchbar-field .mdl-textfield__input').val('').parent().removeClass('is-focused').removeClass('is-dirty');\r\n        app.search.txt = \"\";\r\n    };\r\n    var listRenderingParamInit = function (option) {\r\n        var dataToInit = {\r\n            baseIndex: 1,\r\n            sortDir: null,\r\n            keyToSort: null\r\n        };\r\n        if (option) Object.assign(dataToInit, option);\r\n        Object.assign(app.listRendering, dataToInit);\r\n        sortType = null;\r\n    };\r\n    var durationToString = function (duration) {\r\n        var ctr = 0;\r\n        var result = \"\";\r\n        var addString = function (num, txt) {\r\n            ctr++;\r\n            result += (ctr === 2 ? \" \" : \"\") + num + \" \" + txt;\r\n        };\r\n        if (duration.get(\"Y\") !== 0) {\r\n            addString(duration.get(\"Y\"), \"年\");\r\n        }\r\n        if (duration.get(\"M\") !== 0) {\r\n            addString(duration.get(\"M\"), \"個月\");\r\n        }\r\n        if (ctr == 2) return result;\r\n        if (duration.get(\"d\") !== 0) {\r\n            addString(duration.get(\"d\"), \"天\");\r\n        }\r\n        if (ctr == 2) return result;\r\n        if (duration.get(\"h\") !== 0) {\r\n            addString(duration.get(\"h\"), \"小時\");\r\n        }\r\n        if (ctr == 2) return result;\r\n        if (duration.get(\"m\") !== 0) {\r\n            addString(duration.get(\"m\"), \"分鐘\");\r\n        }\r\n        if (result === \"\") result += \"0\";\r\n        return result;\r\n    };\r\n    var drawChart = function (data) {\r\n        google.charts.load('current', {\r\n            'packages': ['corechart']\r\n        });\r\n        google.charts.setOnLoadCallback(function () {\r\n            var dataTable = google.visualization.arrayToDataTable(data);\r\n            var options = {\r\n                // title: \"歷史每週使用量\",\r\n                // hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},\r\n                vAxis: {\r\n                    minValue: 0\r\n                }\r\n            };\r\n            var chart = new google.visualization.AreaChart($('#chart_div').get(0));\r\n            chart.draw(dataTable, options);\r\n            window.drawChart = function () {\r\n                return chart.draw(dataTable, options);\r\n            };\r\n        });\r\n    };\r\n    var Section = {\r\n        showed: null,\r\n        get active() {\r\n            return this.showed;\r\n        },\r\n        open: function (destination, data, daemon) {\r\n            if (!(destination in app)) return;\r\n            if (this.showed !== null) this.close();\r\n            app[destination].show = true;\r\n            tmpDynamicLoadingBaseIndex = null;\r\n            listRenderingParamInit();\r\n            app.search.placeholder = (placeholderTxtDict[destination] ? \"在「\" + placeholderTxtDict[destination] + \"」中搜尋\" : \"搜尋\");\r\n            if (!daemon) {\r\n                $(\"main\").scrollTop(0);\r\n                if (!test) app[destination].data = data;\r\n                app.$nextTick(function () {\r\n                    componentHandler.upgradeDom();\r\n                    bindKeyUpEvent();\r\n                });\r\n            } else {\r\n                if (!test)\r\n                    requestData(destination, function (data) {\r\n                        app[destination].data = data;\r\n                    }, {\r\n                        daemon: true\r\n                    });\r\n            }\r\n            this.showed = destination;\r\n        },\r\n        close: function () {\r\n            var showedSection = this.showed;\r\n            if (showedSection !== null) {\r\n                app[showedSection].show = false;\r\n                this.showed = null;\r\n            }\r\n        }\r\n    };\r\n    var Detail = {\r\n        showed: null,\r\n        open: function (destination, data) {\r\n            if (!(destination in app)) return;\r\n            if (this.showed !== null) this.close();\r\n            app[destination].show = true;\r\n            if (!test) app[destination].data = data;\r\n            if (destination === \"search\")\r\n                app.$nextTick(function () {\r\n                    componentHandler.upgradeDom();\r\n                    bindKeyUpEvent();\r\n                });\r\n            else\r\n                app.$nextTick(function () {\r\n                    setTimeout(function () {\r\n                        // if (destination === \"shopDetail\") drawChart(data.chartData);\r\n                        componentHandler.upgradeDom();\r\n                        bindKeyUpEvent();\r\n                    }, 600);\r\n                });\r\n            this.showed = destination;\r\n            $(\"main\").scrollTop(0);\r\n        },\r\n        close: function () {\r\n            var showedDetail = this.showed;\r\n            if (showedDetail !== null) {\r\n                if (showedDetail === \"search\") {\r\n                    for (var aCategory in app.search.data)\r\n                        app.search.data[aCategory].list = [];\r\n                    app.search.show = false;\r\n                } else {\r\n                    app[showedDetail].data.history = [];\r\n                    app[showedDetail].show = false;\r\n                }\r\n                this.showed = null;\r\n                app.$nextTick(function () {\r\n                    setTimeout(function () {\r\n                        bindKeyUpEvent();\r\n                    }, 600);\r\n                });\r\n            }\r\n        }\r\n    };\r\n    var Dialog = {\r\n        ele: $(\"dialog.dialog\"),\r\n        nowClass: \"dialog--step_one\",\r\n        get nowActiveClass() {\r\n            return this.nowClass;\r\n        },\r\n        classDict: {\r\n            stepOne: \"dialog--step_one\",\r\n            stepTwo: \"dialog--step_two\",\r\n            edit: \"dialog--edit\"\r\n        },\r\n        changeClass: function (to) {\r\n            if (!this.classDict[to]) throw new Error(\"Dialog has No such Class!\");\r\n            this.ele.removeClass(this.nowClass);\r\n            this.ele.addClass(this.classDict[to]);\r\n        },\r\n        open: function (to) {\r\n            if (typeof to !== \"undefined\") this.changeClass(to);\r\n            return this.ele.showModal();\r\n        },\r\n        close: function () {\r\n            return this.ele.close();\r\n        }\r\n    };\r\n    var DeliveryDetail = {\r\n        eleHtml: null,\r\n        showedElement: null,\r\n        showedDelivery: null,\r\n        dataIndex: -1,\r\n        init: function () {\r\n            var ele = $(\"#delivery_detail\");\r\n            this.eleHtml = ele.html();\r\n            ele.remove();\r\n        },\r\n        open: function (rawIndex, dataIndex) {\r\n            var theDelivery = $(\"#detail tbody tr:nth-child(\" + rawIndex + \")\");\r\n            if (theDelivery.length === 0) return;\r\n            if (this.showedElement !== null) this.close();\r\n            theDelivery.addClass(\"hide-border-bottom\");\r\n            theDelivery.after(this.eleHtml);\r\n            this.showedElement = $(\"#delivery_detail\");\r\n            this.showedDelivery = theDelivery;\r\n            this.dataIndex = dataIndex;\r\n        },\r\n        close: function () {\r\n            if (this.showedElement === null) return;\r\n            this.showedElement.remove();\r\n            this.showedElement = null;\r\n            this.showedDelivery.removeClass(\"hide-border-bottom\");\r\n            this.dataIndex = -1;\r\n        }\r\n    };\r\n    Vue.component(\"delivery-detail-component\", {\r\n        template: \"#delivery_detail_component\"\r\n    });\r\n    var app = new Vue({\r\n        el: \"#app\",\r\n        mounted: function () {\r\n            var localApp = this;\r\n            $(window).resize(debounce(function () {\r\n                // window.drawChart();\r\n                if ($('table').length) {\r\n                    localApp.listRendering.rawCapacity = getListRenderingRawCapacity(Section.active + (localApp.detailIsOpen ? \"-detail\" : \"\"));\r\n                    localApp.listRendering.dataLength = getListRenderingDataLength();\r\n                    localApp.$nextTick(function () {\r\n                        componentHandler.upgradeDom();\r\n                    });\r\n                }\r\n            }, 500));\r\n        },\r\n        updated: function () {\r\n            this.listRendering.rawCapacity = getListRenderingRawCapacity(Section.active + (this.detailIsOpen ? \"-detail\" : \"\"));\r\n            this.listRendering.dataLength = getListRenderingDataLength();\r\n            this.$nextTick(function () {\r\n                componentHandler.upgradeDom();\r\n            });\r\n        },\r\n        filters: {\r\n            numberWithCommas: function (number) {\r\n                if (typeof number !== \"number\") return \"0\";\r\n                return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            },\r\n            numberToPercentage: numberToPercentage,\r\n            durationToString: function (millisecond) {\r\n                if (isNaN(millisecond)) return millisecond;\r\n                return durationToString(moment.duration(millisecond));\r\n            },\r\n            dateToString: function (date, mode) {\r\n                if (date === \"尚未歸還\") return date;\r\n                var thisMoment = moment(date);\r\n                if (!thisMoment.isValid()) return date;\r\n                switch (mode) {\r\n                    case \"only_date\":\r\n                        return thisMoment.format(\"YYYY-MM-DD\");\r\n                    case \"with_day\":\r\n                        return thisMoment.format(\"YYYY-MM-DD (ddd) HH:mm\");\r\n                    default:\r\n                        return thisMoment.format(\"YYYY-MM-DD HH:mm\");\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            navClickListener: function (destination) {\r\n                cleanSearchBar();\r\n                $('.mdl-layout__obfuscator.is-visible').click();\r\n                requestData(destination, function (data) {\r\n                    Detail.close();\r\n                    Section.open(destination, data);\r\n                });\r\n            },\r\n            aRecordClickListener: function (from, id) {\r\n                var localApp = this;\r\n                var detailToShow = from + \"Detail\";\r\n                var toRequest = detailToShow + \"?id=\" + id;\r\n                requestData(toRequest, function (data) {\r\n                    Detail.open(detailToShow, data);\r\n                    tmpDynamicLoadingBaseIndex = localApp.listRendering.baseIndex;\r\n                    cleanSearchBar();\r\n                    listRenderingParamInit();\r\n                });\r\n            },\r\n            aRefreshButtonClickListener: function (type) {\r\n                var typeToRefresh = \"refresh/\" + type;\r\n                requestData(typeToRefresh, function (data) {\r\n                    if (typeof data === \"object\") data = \"Done\";\r\n                    window.showToast(data);\r\n                }, {\r\n                    method: \"PATCH\"\r\n                });\r\n            },\r\n            closeDetail: function () {\r\n                Detail.close();\r\n                cleanSearchBar();\r\n                listRenderingParamInit({\r\n                    baseIndex: tmpDynamicLoadingBaseIndex || 1\r\n                });\r\n            },\r\n            searchData: function () {\r\n                var txt = this.search.txt;\r\n                if (txt.length < 1) return;\r\n                var toRequest = \"search?txt=\" + txt;\r\n                if (Section.active === 'index') {\r\n                    toRequest += \"&fields=shop,user,container\"\r\n                } else if (Section.active === 'container') {\r\n                    toRequest += \"&fields=container\"\r\n                } else {\r\n                    return;\r\n                }\r\n                requestData(toRequest, function (data) {\r\n                    Detail.open(\"search\", data);\r\n                });\r\n            },\r\n            aSearchResultClickListener: function (category, id) {\r\n                var detailToShow = category + \"Detail\";\r\n                if (id === -1) return;\r\n                var toRequest = detailToShow + \"?id=\" + id;\r\n                requestData(toRequest, function (data) {\r\n                    Detail.open(detailToShow, data);\r\n                    Section.open(category, data, true);\r\n                    cleanSearchBar();\r\n                });\r\n            },\r\n            sortList: function (by, type) {\r\n                if (this.listRendering.sortDir == null) this.listRendering.sortDir = true;\r\n                else if (by === this.listRendering.keyToSort) this.listRendering.sortDir = !this.listRendering.sortDir;\r\n                this.listRendering.keyToSort = by;\r\n                if (typeof type === \"undefined\") sortType = \"number\";\r\n                else sortType = type;\r\n                this.listRendering.baseIndex = 1;\r\n            },\r\n            showKeySorting: function (txt, key) {\r\n                if (key === this.listRendering.keyToSort) {\r\n                    txt += (this.listRendering.sortDir ? icon.arrowDropDown : icon.arrowDropUp);\r\n                }\r\n                return txt;\r\n            },\r\n            flipPage: function (to) {\r\n                var maxIndex = Math.ceil(this.listRendering.dataLength / this.listRendering.rawCapacity);\r\n                switch (to) {\r\n                    case \"next\":\r\n                        this.listRendering.baseIndex = Math.min((this.listRendering.baseIndex + 1), maxIndex);\r\n                        break;\r\n                    case \"last\":\r\n                        this.listRendering.baseIndex = Math.max((this.listRendering.baseIndex - 1), 1);\r\n                        break;\r\n                }\r\n            },\r\n            listMatchCtx: function (data) {\r\n                if (this.searchRegExp) {\r\n                    return data.replace(this.searchRegExp, \"<strong>$&</strong>\");\r\n                } else {\r\n                    return data;\r\n                }\r\n            },\r\n            numberToPercentage: numberToPercentage,\r\n            openDialog: function (to) {\r\n                return Dialog.open(to);\r\n            },\r\n            flipDialogPage: function (to) {\r\n                return Dialog.changeClass(to);\r\n            },\r\n            closeDialog: function () {\r\n                return Dialog.close();\r\n            },\r\n            openDeliveryDetail: function (rawIndex, dataIndex) {\r\n                return DeliveryDetail.open(rawIndex, dataIndex);\r\n            }\r\n        },\r\n        computed: {\r\n            detailIsOpen: function () {\r\n                return this.search.show || this.shopDetail.show || this.userDetail.show || this.containerDetail.show;\r\n            },\r\n            searchRegExp: function () {\r\n                if (this.search.txt.length > 0) {\r\n                    this.listRendering.baseIndex = 1;\r\n                    var txtArr = this.search.txt.split(\" \").filter(\r\n                        function (ele) {\r\n                            return ele !== \"\";\r\n                        }\r\n                    );\r\n                    txtArr.forEach(function (ele, index, arr) {\r\n                        if (ele.length > 1)\r\n                            arr[index] = ele.split(\"\").join(\"-*\");\r\n                    });\r\n                    var regExpTxt = txtArr.join(\"|\");\r\n                    try {\r\n                        return new RegExp(regExpTxt, 'gi');\r\n                    } catch (error) {\r\n                        return null;\r\n                    }\r\n                } else {\r\n                    return null;\r\n                }\r\n            },\r\n            shopList: function () {\r\n                var oriList = this.shop.data.list.filter(dataFilter);\r\n                if (!(this.listRendering.keyToSort === null || this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            shopDetailHistory: function () {\r\n                var oriList = this.shopDetail.data.history;\r\n                if (!(this.listRendering.keyToSort === null || !this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            userList: function () {\r\n                var oriList = this.user.data.list.filter(dataFilter);\r\n                if (!(this.listRendering.keyToSort === null || this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            userDetailHistory: function () {\r\n                var oriList = this.userDetail.data.history;\r\n                if (!(this.listRendering.keyToSort === null || !this.detailIsOpen)) {\r\n                    var lastIndex = oriList.map(function (ele) {\r\n                        return ele.returnTime;\r\n                    }).lastIndexOf(\"尚未歸還\") + 1;\r\n                    if (this.listRendering.keyToSort !== \"returnTime\")\r\n                        oriList = oriList.slice(0, lastIndex).sort(dataSorter.get(sortType))\r\n                            .concat(oriList.slice(lastIndex).sort(dataSorter.get(sortType)));\r\n                    else\r\n                        oriList = oriList.slice(0, lastIndex).concat(oriList.slice(lastIndex).sort(dataSorter.get(sortType)));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            containerList: function () {\r\n                var oriList = this.container.data.list;\r\n                if (!(this.listRendering.keyToSort === null || this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            containerDetailHistory: function () {\r\n                var oriList = this.containerDetail.data.history;\r\n                if (!(this.listRendering.keyToSort === null || !this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            deliveryList: function () {\r\n                var oriList = this.delivery.data.list;\r\n                if (!(this.listRendering.keyToSort === null || this.detailIsOpen)) {\r\n                    oriList = oriList.sort(dataSorter.get(sortType));\r\n                }\r\n                return oriList.slice(this.listRendering_cpt.startIndex, this.listRendering_cpt.endIndex);\r\n            },\r\n            listRendering_cpt: function () {\r\n                return {\r\n                    startIndex: (this.listRendering.baseIndex - 1) * this.listRendering.rawCapacity,\r\n                    endIndex: this.listRendering.baseIndex * this.listRendering.rawCapacity\r\n                };\r\n            }\r\n        },\r\n        data: {\r\n            loading: {\r\n                show: false,\r\n                txt: \"載入中...\"\r\n            },\r\n            listRendering: {\r\n                baseIndex: 1,\r\n                rawCapacity: 1,\r\n                dataLength: -1,\r\n                keyToSort: null,\r\n                sortDir: null\r\n            },\r\n            index: {\r\n                show: false,\r\n                data: {\r\n                    summary: {\r\n                        userAmount: 824,\r\n                        storeAmount: 18,\r\n                        activityAmount: 62\r\n                    },\r\n                    activityHistorySummary: {\r\n                        usedAmount: 16774,\r\n                        lostAmount: 135,\r\n                        totalDuration: 12314\r\n                    },\r\n                    shopRecentHistorySummary: {\r\n                        usedAmount: 87,\r\n                        customerLostAmount: 3,\r\n                        totalDuration: 111013967,\r\n                        quantityOfBorrowingFromDiffPlace: 23\r\n                    },\r\n                    shopHistorySummary: {\r\n                        usedAmount: 6487,\r\n                        shopLostAmount: 248,\r\n                        customerLostAmount: 248,\r\n                        totalDuration: 57563433659,\r\n                        quantityOfBorrowingFromDiffPlace: 796\r\n                    }\r\n                }\r\n            },\r\n            search: {\r\n                show: false,\r\n                txt: \"\",\r\n                placeholder: \"搜尋\",\r\n                data: {\r\n                    user: {\r\n                        show: true,\r\n                        list: [{\r\n                            id: \"0936033091\",\r\n                            name: \"0936-033-091\"\r\n                        }]\r\n                    },\r\n                    container: {\r\n                        show: true,\r\n                        list: [{\r\n                            id: 17,\r\n                            name: \"#017　16oz 杯子\",\r\n                            type: 0\r\n                        }]\r\n                    },\r\n                    shop: {\r\n                        show: true,\r\n                        list: [{\r\n                            id: 0,\r\n                            name: \"布萊恩紅茶\"\r\n                        }]\r\n                    },\r\n                    delivery: {\r\n                        show: true,\r\n                        list: []\r\n                    }\r\n                }\r\n            },\r\n            shop: {\r\n                show: false,\r\n                data: {\r\n                    list: []\r\n                }\r\n            },\r\n            shopDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    storeName: \"布萊恩紅茶\",\r\n                    toUsedAmount: 24,\r\n                    todayAmount: 2,\r\n                    weekAmount: 18,\r\n                    recentAmount: 18,\r\n                    joinedDate: 1234,\r\n                    contactNickname: \"店長\",\r\n                    contactPhone: \"0988555666\",\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    history: []\r\n                }\r\n            },\r\n            activity: {\r\n                show: false,\r\n\r\n            },\r\n            user: {\r\n                show: false,\r\n                data: {\r\n                    totalUserAmount: 0,\r\n                    totalUsageAmount: 0,\r\n                    weeklyAverageUsage: 0,\r\n                    totalLostAmount: 0,\r\n                    list: []\r\n                }\r\n            },\r\n            userDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    userPhone: \"0936-003-091\",\r\n                    usingAmount: 3,\r\n                    lostAmount: 23,\r\n                    totalUsageAmount: 200,\r\n                    joinedDate: 1234,\r\n                    joinedMethod: \"店鋪 (方糖咖啡)\",\r\n                    recentAmount: 18,\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    averageUsingDuration: 20 * 60 * 1000,\r\n                    amountOfBorrowingFromDiffPlace: 43,\r\n                    history: []\r\n                }\r\n            },\r\n            container: {\r\n                show: false,\r\n                data: {\r\n                    list: []\r\n                }\r\n            },\r\n            containerDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    containerID: \"#257\",\r\n                    containerType: {\r\n                        txt: \"16oz 玻璃杯\",\r\n                        code: 1\r\n                    },\r\n                    reuseTime: 24,\r\n                    status: \"使用中\",\r\n                    bindedUser: \"0921-**-931\",\r\n                    joinedDate: 1234,\r\n                    history: []\r\n                }\r\n            },\r\n            delivery: {\r\n                show: false,\r\n                data: {\r\n                    list: [{\r\n                        boxAmount: 4,\r\n                        deliveryDate: 23132131,\r\n                        toBox: -1,\r\n                        toDelivery: -1,\r\n                        toSign: 4,\r\n                        signed: -2,\r\n                        warning: -2,\r\n                        expand: false,\r\n                        boxList: [{\r\n                            boxName: \"Box1\",\r\n                            contentList: [{\r\n                                contentName: \"12oz 360ml\",\r\n                                contentCode: 1,\r\n                                amount: 6\r\n                            }]\r\n                        }]\r\n                    }, {\r\n                        boxAmount: 4,\r\n                        deliveryDate: 23132131,\r\n                        toBox: -1,\r\n                        toDelivery: -1,\r\n                        toSign: 4,\r\n                        signed: -2,\r\n                        warning: -2,\r\n                        expand: true,\r\n                        boxList: [{\r\n                            boxName: \"大密封箱\",\r\n                            contentList: [{\r\n                                contentName: \"12oz 360ml\",\r\n                                contentCode: 1,\r\n                                amount: 6\r\n                            }]\r\n                        }]\r\n                    }]\r\n                }\r\n            },\r\n            console: {\r\n                show: false,\r\n                data: null\r\n            }\r\n        }\r\n    });\r\n    window.app = app;\r\n    Section.showed = (window.location.hash || \"#index\").replace(\"#\", \"\");\r\n    if (!(Section.showed in app)) Section.showed = 'index';\r\n    app.navClickListener(Section.active);\r\n}","(function (window) {\r\n    var pendingReq = null;\r\n\r\n    function requestData(page, cb, option) {\r\n        if (pendingReq) pendingReq.abort();\r\n        if (!option) option = {};\r\n        var daemon = option.daemon || false;\r\n        var method = option.method || \"GET\";\r\n        if (!daemon) startLoading();\r\n        var requestUrl = \"/manager/data/\" + page;\r\n        pendingReq = $.ajax(requestUrl, {\r\n            headers: {\r\n                Accept: \"application/json; charset=utf-8\",\r\n            },\r\n            dataType: \"json\",\r\n            method: method\r\n            // timeout: 30 * 1000\r\n        })\r\n            .done(function (data, textStatus, jqXHR) {\r\n                if (!daemon) stopLoading();\r\n                cb(data);\r\n            })\r\n            .fail(function (jqXHR, textStatus, errorThrown) {\r\n                if (jqXHR.responseJSON &&\r\n                    (jqXHR.responseJSON.code === \"B005\" ||\r\n                        jqXHR.responseJSON.code === \"B003\")) {\r\n                    return window.location.href = \"/manager/logout\";\r\n                }\r\n                if (!daemon) stopLoading();\r\n                if (jqXHR.statusText !== \"abort\") {\r\n                    var txt = jqXHR.responseJSON ? jqXHR.responseJSON.message : jqXHR.statusText || \"Unknown ERR\";\r\n                    showToast(\"[\" + jqXHR.status + \"]: \" + txt);\r\n                }\r\n            })\r\n            .always(function () {\r\n                pendingReq = null;\r\n            });\r\n    }\r\n\r\n    function requestDataDemo(page, cb, option) {\r\n        if (pendingReq) clearTimeout(pendingReq);\r\n        startLoading();\r\n        pendingReq = setTimeout(function () {\r\n            pendingReq = null;\r\n            stopLoading();\r\n            cb();\r\n        }, 500);\r\n    }\r\n\r\n    function startLoading() {\r\n        app.loading.txt = \"Loading...\";\r\n        app.loading.show = true;\r\n    }\r\n\r\n    function stopLoading() {\r\n        app.loading.show = false;\r\n        app.loading.txt = \"\";\r\n    }\r\n\r\n    function showToast(msg) {\r\n        document.querySelector(\"#toast\").MaterialSnackbar.showSnackbar({\r\n            message: msg,\r\n            timeout: 4000,\r\n        });\r\n    }\r\n\r\n    window.test = false;\r\n    window.requestData = function (page, cb, option) {\r\n        if (!window.test) return requestData(page, cb, option);\r\n        else return requestDataDemo(page, cb, option);\r\n    };\r\n    window.showToast = showToast;\r\n})(window);"]}