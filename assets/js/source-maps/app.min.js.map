{"version":3,"sources":["main.js","api.js"],"names":["initPage","window","location","hash","durationToString","duration","ctr","result","addString","num","txt","get","appInit","needUpdate","showedDetail","nowActiveSection","replace","$","index","tmpDynamicLoadingBaseIndex","numberToPercentage","number","option","parseFloat","Math","abs","toFixed","app","Vue","el","mounted","this","show","filters","numberWithCommas","toString","millisecond","isNaN","moment","dateToString","date","mode","thisMoment","isValid","format","updated","componentHandler","upgradeDom","dynamicLoading","rawCapacity","rawCapacityCount","detailIsOpen","methods","navClickListener","destination","localApp","click","requestData","data","test","baseIndex","scrollTop","aRecordClickListener","from","toRequest","list","id","closeDetail","history","flipPage","to","dataLength","length","maxIndex","ceil","min","max","computed","shopDetail","userDetail","containerDetail","deliveryDetail","loading","summary","userAmount","storeAmount","activityAmount","activityHistorySummary","usedAmount","lostAmount","totalDuration","shopHistorySummary","quantityOfBorrowingFromDiffPlace","shopRecentHistorySummary","search","shop","storeName","toUsedAmount","todayAmount","weekAmount","weekAverage","expand","recentAmount","joinedDate","contactNickname","contactPhone","recentAmountPercentage","time","serial","action","owner","by","activity","user","totalUserAmount","totalUsageAmount","weeklyAverageUsage","totalLostAmount","phone","usingAmount","userPhone","joinedMethod","averageUsingDuration","amountOfBorrowingFromDiffPlace","containerType","containerID","rentTime","rentPlace","returnTime","returnPlace","usingDuration","container","type","totalAmount","returnedAmount","toCleanAmount","toDeliveryAmount","toSignAmount","inStorageAmount","code","reuseTime","status","bindedUser","tradeTime","newUser","oriUser","comment","delivery","table","find","table_box","getBoundingClientRect","rawHeight","floor","innerHeight","top","pendingReq","page","cb","abort","startLoading","requestUrl","console","log","ajax","headers","Accept","dataType","done","textStatus","jqXHR","stopLoading","fail","errorThrown","errMsg","statusText","responseJSON","message","document","querySelector","MaterialSnackbar","showSnackbar","timeout","always","clearTimeout","setTimeout","requestDataDemo","on","pathname","css"],"mappings":"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","file":"../app.min.js","sourcesContent":["function initPage() {\r\n    return window.location.hash || \"#index\";\r\n};\r\n\r\nfunction durationToString(duration) {\r\n    var ctr = 0;\r\n    var result = \"\";\r\n    var addString = function(num, txt) {\r\n        ctr++;\r\n        result += (ctr === 2 ? \" \" : \"\") + num + \" \" + txt;\r\n    };\r\n    if (duration.get(\"Y\") !== 0) {\r\n        addString(duration.get(\"Y\"), \"年\");\r\n    }\r\n    if (duration.get(\"M\") !== 0) {\r\n        addString(duration.get(\"M\"), \"個月\");\r\n    }\r\n    if (ctr == 2) return result;\r\n    if (duration.get(\"d\") !== 0) {\r\n        addString(duration.get(\"d\"), \"天\");\r\n    }\r\n    if (ctr == 2) return result;\r\n    if (duration.get(\"h\") !== 0) {\r\n        addString(duration.get(\"h\"), \"小時\");\r\n    }\r\n    if (ctr == 2) return result;\r\n    if (duration.get(\"m\") !== 0) {\r\n        addString(duration.get(\"m\"), \"分鐘\");\r\n    }\r\n    if (result === \"\") result += \"0\";\r\n    return result;\r\n}\r\n\r\n$(window).on('load', function() {\r\n    if (window.location.pathname !== \"/manager/login\") {\r\n        $('#loading_main').css('display', 'none');\r\n        appInit(window);\r\n    }\r\n});\r\n\r\nfunction appInit(window) {\r\n    var needUpdate = false;\r\n    var showedDetail = null;\r\n    var nowActiveSection = initPage().replace(\"#\", \"\");\r\n    if (!$(\"#\" + nowActiveSection).get(0)) nowActiveSection = index;\r\n    var tmpDynamicLoadingBaseIndex = null;\r\n    var arrowUpward = '<i class=\"material-icons\" role=\"presentation\">arrow_upward</i>';\r\n    var arrowDownward = '<i class=\"material-icons\" role=\"presentation\">arrow_downward</i>';\r\n    var arrowDropDown = '<i class=\"material-icons\" role=\"presentation\">arrow_drop_down</i>';\r\n    var numberToPercentage = function(number, option) {\r\n        switch (option) {\r\n            case 'withArrow':\r\n                var arrow = number >= 0 ? arrowUpward : arrowDownward;\r\n                return \"(\" + arrow + parseFloat(Math.abs(number) * 100).toFixed(1) + \"%)\";\r\n                break;\r\n            case 'withoutParentheses':\r\n                return parseFloat(number * 100).toFixed(1) + \"%\";\r\n                break;\r\n            default:\r\n                return \"(\" + parseFloat(number * 100).toFixed(1) + \"%)\";\r\n                break;\r\n        }\r\n    };\r\n    var app = new Vue({\r\n        el: \"#app\",\r\n        mounted: function() {\r\n            this[nowActiveSection].show = true;\r\n        },\r\n        filters: {\r\n            numberWithCommas: function(number) {\r\n                return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            },\r\n            numberToPercentage: numberToPercentage,\r\n            durationToString: function(millisecond) {\r\n                if (isNaN(millisecond)) return millisecond;\r\n                return durationToString(moment.duration(millisecond));\r\n            },\r\n            dateToString: function(date, mode) {\r\n                if (date === \"尚未歸還\") return date;\r\n                var thisMoment = moment(date);\r\n                if (!thisMoment.isValid()) return date;\r\n                switch (mode) {\r\n                    case \"only_date\":\r\n                        return thisMoment.format(\"YYYY-MM-DD\");\r\n                    case \"with_day\":\r\n                        return thisMoment.format(\"YYYY-MM-DD (ddd) HH:mm\");\r\n                    default:\r\n                        return thisMoment.format(\"YYYY-MM-DD HH:mm\");\r\n                }\r\n            }\r\n        },\r\n        updated: function() {\r\n            if (needUpdate) {\r\n                componentHandler.upgradeDom();\r\n                needUpdate = false;\r\n            }\r\n            this.dynamicLoading.rawCapacity = rawCapacityCount(nowActiveSection + (this.detailIsOpen ? \"-detail\" : \"\"));\r\n        },\r\n        methods: {\r\n            navClickListener: function(destination) {\r\n                var localApp = this;\r\n                if ((nowActiveSection + \"Detail\") in this) this[nowActiveSection + \"Detail\"].show = false;\r\n                $('.mdl-layout__obfuscator.is-visible').click();\r\n                requestData(destination, function(data) {\r\n                    localApp[nowActiveSection].show = false;\r\n                    localApp[destination].show = true;\r\n                    if (!test) localApp[destination].data = data;\r\n                    tmpDynamicLoadingBaseIndex = null;\r\n                    localApp.dynamicLoading.baseIndex = 1;\r\n                    nowActiveSection = destination;\r\n                    needUpdate = true;\r\n                    $('main').scrollTop(0);\r\n                });\r\n            },\r\n            aRecordClickListener: function(from, index) {\r\n                var localApp = this;\r\n                showedDetail = from + \"Detail\";\r\n                var toRequest = showedDetail + \"?id=\" + this[from].data.list[index].id;\r\n                requestData(toRequest, function(data) {\r\n                    localApp[showedDetail].show = true;\r\n                    if (!test) localApp[showedDetail].data = data;\r\n                    tmpDynamicLoadingBaseIndex = localApp.dynamicLoading.baseIndex;\r\n                    localApp.dynamicLoading.baseIndex = 1;\r\n                    $('main').scrollTop(0);\r\n                });\r\n            },\r\n            closeDetail: function() {\r\n                this[showedDetail || (nowActiveSection + \"Detail\")].show = false;\r\n                this[showedDetail || (nowActiveSection + \"Detail\")].data.history = [];\r\n                this.dynamicLoading.baseIndex = tmpDynamicLoadingBaseIndex || 1;\r\n            },\r\n            flipPage: function(to) {\r\n                var dataLength;\r\n                if (!this.detailIsOpen) {\r\n                    dataLength = this[nowActiveSection].data.list.length;\r\n                } else {\r\n                    dataLength = this[nowActiveSection + \"Detail\"].data.history.length;\r\n                }\r\n                var maxIndex = Math.ceil(dataLength / this.dynamicLoading.rawCapacity);\r\n                switch (to) {\r\n                    case \"next\":\r\n                        this.dynamicLoading.baseIndex = Math.min((this.dynamicLoading.baseIndex + 1), maxIndex);\r\n                        break;\r\n                    case \"last\":\r\n                        this.dynamicLoading.baseIndex = Math.max((this.dynamicLoading.baseIndex - 1), 1);\r\n                        break;\r\n                }\r\n            },\r\n            numberToPercentage: numberToPercentage\r\n        },\r\n        computed: {\r\n            detailIsOpen: function() {\r\n                return this.shopDetail.show || this.userDetail.show || this.containerDetail.show || this.deliveryDetail.show;\r\n            }\r\n        },\r\n        data: {\r\n            loading: {\r\n                show: false,\r\n                txt: \"載入中...\"\r\n            },\r\n            dynamicLoading: {\r\n                baseIndex: 1,\r\n                rawCapacity: 0\r\n            },\r\n            index: {\r\n                show: false,\r\n                data: {\r\n                    summary: {\r\n                        userAmount: 824,\r\n                        storeAmount: 18,\r\n                        activityAmount: 62\r\n                    },\r\n                    activityHistorySummary: {\r\n                        usedAmount: 16774,\r\n                        lostAmount: 135,\r\n                        totalDuration: 12314\r\n                    },\r\n                    shopHistorySummary: {\r\n                        usedAmount: 6487,\r\n                        lostAmount: 248,\r\n                        totalDuration: 57563433659,\r\n                        quantityOfBorrowingFromDiffPlace: 796\r\n                    },\r\n                    shopRecentHistorySummary: {\r\n                        usedAmount: 87,\r\n                        lostAmount: 3,\r\n                        totalDuration: 111013967,\r\n                        quantityOfBorrowingFromDiffPlace: 23\r\n                    }\r\n                }\r\n            },\r\n            search: {\r\n                show: false,\r\n\r\n            },\r\n            shop: {\r\n                show: false,\r\n                data: {\r\n                    list: [{\r\n                        id: 0,\r\n                        storeName: \"布萊恩紅茶\",\r\n                        toUsedAmount: 24,\r\n                        todayAmount: 2,\r\n                        weekAmount: 18,\r\n                        weekAverage: 10\r\n                    }]\r\n                }\r\n            },\r\n            shopDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    storeName: \"布萊恩紅茶\",\r\n                    toUsedAmount: 24,\r\n                    todayAmount: 2,\r\n                    weekAmount: 18,\r\n                    recentAmount: 18,\r\n                    joinedDate: 1234,\r\n                    contactNickname: \"店長\",\r\n                    contactPhone: \"0988555666\",\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    history: [{\r\n                        time: 1234,\r\n                        serial: \"#161\",\r\n                        action: \"借出\",\r\n                        owner: \"0911-***-521\",\r\n                        by: \"布萊恩紅茶(阿呆店長)\"\r\n                    }]\r\n                }\r\n            },\r\n            activity: {\r\n                show: false,\r\n\r\n            },\r\n            user: {\r\n                show: false,\r\n                data: {\r\n                    totalUserAmount: 2500,\r\n                    totalUsageAmount: 2500,\r\n                    weeklyAverageUsage: 2500,\r\n                    totalLostAmount: 12,\r\n                    list: [{\r\n                        id: 0,\r\n                        phone: \"0912345678\",\r\n                        usingAmount: 25,\r\n                        lostAmount: 1,\r\n                        totalUsageAmount: 30\r\n                    }]\r\n                }\r\n            },\r\n            userDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    userPhone: \"0936-003-091\",\r\n                    usingAmount: 3,\r\n                    lostAmount: 23,\r\n                    totalUsageAmount: 200,\r\n                    joinedDate: 1234,\r\n                    joinedMethod: \"店鋪 (方糖咖啡)\",\r\n                    recentAmount: 18,\r\n                    recentAmountPercentage: 0.16,\r\n                    weekAverage: 10,\r\n                    averageUsingDuration: 20 * 60 * 1000,\r\n                    amountOfBorrowingFromDiffPlace: 43,\r\n                    history: [{\r\n                        containerType: \"12oz 玻璃杯\",\r\n                        containerID: \"#101\",\r\n                        rentTime: 1234,\r\n                        rentPlace: \"布萊恩紅茶\",\r\n                        returnTime: 1234,\r\n                        returnPlace: \"布萊恩紅茶\",\r\n                        usingDuration: 1234\r\n                    }]\r\n                }\r\n            },\r\n            container: {\r\n                show: false,\r\n                data: {\r\n                    list: [{\r\n                            id: 0,\r\n                            type: \"16oz 玻璃杯\",\r\n                            totalAmount: 286,\r\n                            toUsedAmount: 106,\r\n                            usingAmount: 20,\r\n                            returnedAmount: 19,\r\n                            toCleanAmount: 41,\r\n                            toDeliveryAmount: 24,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 15,\r\n                            lostAmount: 161\r\n                        },\r\n                        {\r\n                            id: 1,\r\n                            type: \"12oz 玻璃杯\",\r\n                            totalAmount: 393,\r\n                            toUsedAmount: 50,\r\n                            usingAmount: 23,\r\n                            returnedAmount: 17,\r\n                            toCleanAmount: 22,\r\n                            toDeliveryAmount: 0,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 111,\r\n                            lostAmount: 170\r\n                        },\r\n                        {\r\n                            id: 2,\r\n                            type: \"16oz 把手杯\",\r\n                            totalAmount: 56,\r\n                            toUsedAmount: 1,\r\n                            usingAmount: 0,\r\n                            returnedAmount: 0,\r\n                            toCleanAmount: 2,\r\n                            toDeliveryAmount: 0,\r\n                            toSignAmount: 0,\r\n                            inStorageAmount: 49,\r\n                            lostAmount: 4\r\n                        }\r\n                    ]\r\n                }\r\n            },\r\n            containerDetail: {\r\n                show: false,\r\n                expand: false,\r\n                data: {\r\n                    containerID: \"#257\",\r\n                    containerType: {\r\n                        txt: \"16oz 玻璃杯\",\r\n                        code: 1\r\n                    },\r\n                    reuseTime: 24,\r\n                    status: \"使用中\",\r\n                    bindedUser: \"0921-**-931\",\r\n                    joinedDate: 1234,\r\n                    history: [{\r\n                        tradeTime: 1234,\r\n                        action: \"借出\",\r\n                        newUser: \"0921-***-931\",\r\n                        oriUser: \"特有種商行(小衛)\",\r\n                        comment: \"\"\r\n                    }]\r\n                }\r\n            },\r\n            delivery: {\r\n                show: false,\r\n\r\n            },\r\n            deliveryDetail: {\r\n                show: false,\r\n                expand: false,\r\n\r\n            }\r\n        }\r\n    });\r\n    window.app = app;\r\n    app.navClickListener(nowActiveSection);\r\n}\r\n\r\nfunction rawCapacityCount(nowActiveSection) {\r\n    var table = $(\"#\" + nowActiveSection).find('tbody').get(0);\r\n    if (!table) return;\r\n    var table_box = table.getBoundingClientRect();\r\n    var rawHeight = (nowActiveSection !== \"user-detail\" ? 48 : 65);\r\n    var rawCapacity = Math.floor((window.innerHeight - table_box.top - 28) / rawHeight);\r\n    return rawCapacity > 5 ? rawCapacity : 5;\r\n}","(function(window) {\r\n    var pendingReq = null;\r\n\r\n    function requestData(page, cb) {\r\n        if (pendingReq) pendingReq.abort();\r\n        startLoading();\r\n        var requestUrl = \"/manager/data/\" + page;\r\n        console.log(requestUrl);\r\n        pendingReq = $.ajax(requestUrl, {\r\n                headers: {\r\n                    Accept: \"application/json; charset=utf-8\"\r\n                },\r\n                dataType: \"json\",\r\n                // timeout: 30 * 1000\r\n            })\r\n            .done(function(data, textStatus, jqXHR) {\r\n                stopLoading();\r\n                cb(data);\r\n            })\r\n            .fail(function(jqXHR, textStatus, errorThrown) {\r\n                stopLoading();\r\n                if (jqXHR.statusText !== \"abort\")\r\n                    showErr(\"[\" + jqXHR.status + \"]: \" + (jqXHR.responseJSON ? jqXHR.responseJSON.message : jqXHR.statusText || \"Unknown ERR\"));\r\n            })\r\n            .always(function() {\r\n                pendingReq = null;\r\n            });\r\n    }\r\n\r\n    function requestDataDemo(page, cb) {\r\n        if (pendingReq) clearTimeout(pendingReq);\r\n        startLoading();\r\n        var requestUrl = \"/manager/data/\" + page;\r\n        console.log(requestUrl);\r\n        pendingReq = setTimeout(function() {\r\n            pendingReq = null;\r\n            stopLoading();\r\n            cb();\r\n        }, 500);\r\n    }\r\n\r\n    function startLoading() {\r\n        app.loading.txt = \"Loading...\";\r\n        app.loading.show = true;\r\n    }\r\n\r\n    function stopLoading() {\r\n        app.loading.show = false;\r\n        app.loading.txt = \"\";\r\n    }\r\n\r\n    function showErr(errMsg) {\r\n        document.querySelector('#toast').MaterialSnackbar.showSnackbar({\r\n            message: errMsg,\r\n            timeout: 4000\r\n        });\r\n    }\r\n\r\n    window.test = false;\r\n    window.requestData = function(page, cb) {\r\n        if (!window.test) return requestData(page, cb);\r\n        else return requestDataDemo(page, cb);\r\n    };\r\n}(window));"]}